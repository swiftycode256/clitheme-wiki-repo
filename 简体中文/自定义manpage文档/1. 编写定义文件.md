# 编写定义文件：manpage文档

本文章将介绍[主题定义文件](../附录：主题定义文件通用语法/文件格式和语法)中的`manpages`段落语法。这个段落允许你添加自定义的Unix文档手册（`manpage`）文档，达到文档自定义的目的。

有关Unix/Linux文档手册的更多信息，请见[本文章](https://www.man7.org/linux/man-pages/man1/man.1.html)。

## 编写`header`段落

你需要先定义该主题/文件的一些基本信息，包括名称、简介等。请见[header段落](../附录：主题定义文件通用语法/header段落)

## 关于文件路径信息

在本文档中提到的**目标文件路径**指的是该Unix文档手册（manpage）应该放在manpath中（如`/usr/share/man`中的路径结构）的什么地方。

比如说，如果该文档手册在章节1中，文件路径应该是`man1/<name>.1`；如果在章节3中，应该是`man3/<name>.3`。如果你想包括特定语言的文档手册，请在文件路径之前加上系统语言（locale）名称，比如`zh_CN/man1/<name>.1`。有关章节的更多信息，请见上述提到的文章。

在定义文件中，文件路径中的子路径是由空格分开的，并且不能包含任何划线（`/`、`\`）。所以说，`man1/<name>.1`应该在定义文件中写成`man1 <name>.1`。

## `manpages`段落

在定义文件中，所有的Unix文档手册都是在`manpages`段落中定义的：

```plaintext
{manpages}
    # <在这里定义manpage文档>
{/manpages}
```

### 通过文件内容定义：`[file_content]`

你可以使用`[file_content]`语法通过输入文件内容来定义文档手册。在`[file_content]`语句后面需要添加目标文件路径，比如`[file_content] man1 example-app.1`。

在`[file_content]`内容中的缩进会根据多行文本段落的机制处理。详见[多行文本段落](../附录：主题定义文件通用语法/多行文本段落)

你可以同时指定多个`[file_content]`语句，以在同一文件内容下覆盖多个文档文件。它们必须指定与相邻的`[file_content]`语句之后，**并且中间可以有空行或注释**。在其他内容后插入`[file_content]`语句会被视为文件内容，而不是语法定义。

```plaintext
{manpages}
    [file_content] man1 clitheme-man.1
    [file_content] man8 clitheme-man.8
        .TH clitheme-man 1 2024-05-07
        .SH NAME
        clitheme\-man \- access manual pages in the current theme
        .SH SYNOPSIS
        .B clitheme-man [OPTIONS]
        .SH DESCRIPTION
        \fIclitheme-man\fR is a wrapper for \fIman(1)\fR that accesses the manual pages defined in a theme definition file. The current theme definition on the system is controlled through \fIclitheme(1)\fR.
        .P
        \fIclitheme-man\fR is designed to be used the same way as \fIman(1)\fR; the same arguments and options will work on \fIclitheme-man\fR.
        .SH OPTIONS
        For a list of options you can use, please see \fIman(1)\fR.
        .SH SEE ALSO
        \fIclitheme(1)\fR, \fIman(1)\fR
    [/file_content]
{/manpages}
```

> [!TIP]
> 更多选项和功能（如行边界、内容变量）请参考：[可以设定的选项](../附录：主题定义文件通用语法/可以设定的选项)

### 引用文件：`<include_file>`和`[include_file]`

你可以使用`<include_file>`语法来使用定义文件所在文件夹中的一个文件来作为文档手册的文件内容，并且在下一行中使用`as:`语法来定义目标文件路径。

你也可以使用`[include_file]`段落来指定多个目标文件，以使用同一个源文件来覆盖多个文档。

```plaintext
{manpages}
    # 如果主题定义文件的路径是"Documents/example-doc.ctdef.txt"，那引用的文件会从"Documents/doc_manpages/example-app.1"读取
    <include_file> doc_manpages example-app.1
        as: man1 example-app.1
    # 你也可以使用以下语法指定多个目标路径
    [include_file] doc_manpages example-app.1
        as: man1 example-app.1
        as: man1 app-example.1
        as: man1 example.1
    [/include_file]
{/manpages}
```

## 应用主题（`clitheme apply-theme`）

主题定义文件写好后，使用`clitheme apply-theme <文件名>`以应用主题。应用好主题后，请使用`clitheme-man`来使用这些文档手册。详见[使用clitheme-man](2.%20使用clitheme-man)。